{% load staticfiles %}
{% load metron_tags %}
{% load i18n %}

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Experiment</title>
</head>



{% block body_base %}



<script>
  // The java script in the template.html file should be kept to a mimimum. All else should go in the .js


  ////////
  var self_describes_tmp = "{{self_describes|safe}}"
  self_describes_tmp = self_describes_tmp.split('SPLIT_PAIR')

  num_trials = self_describes_tmp.length-1
  console.log('number of trials')
  console.log(num_trials)

  self_describes = []
  for (s=0; s<num_trials; s++){
    self_describes.push(self_describes_tmp[s].split('SPLIT_MID'))
  }
  console.log(self_describes)
  ////////

  ////////
  var sat_grades_temp = "{{sat_grades|safe}}"
  sat_grades_temp = sat_grades_temp.split("SPLIT_PAIR")
  sat_grades = []
  for (s=0; s<num_trials; s++){
    sat_grades_tmp2 = sat_grades_temp[s].split('SPLIT_MID')
    sat_grades.push([sat_grades_tmp2[0].split(','),sat_grades_tmp2[1].split(',')])
  }
  console.log(sat_grades)
  ////////

  ////////
  var profile_chart_img_paths_tmp = "{{profile_charts|safe}}"
  profile_chart_img_paths_tmp = profile_chart_img_paths_tmp.split("SPLIT_PAIR")
  profile_chart_img_paths = []
  for (s=0; s<num_trials; s++){
    profile_chart_img_paths.push(profile_chart_img_paths_tmp[s].split('SPLIT_MID'))
  }
  console.log(profile_chart_img_paths)
  // For now, the images need to be defined in this html template, rather than in the .js file
  // This is because python needs to replace the static tag {static} with the appropriate path
  ////////

  ////////
  var pair_str_tmp = "{{pair_str|safe}}"
  pair_str_tmp = pair_str_tmp.split('SPLIT_PAIR')
  pairs = []
  for (i =0; i<num_trials; i++){
    pairs.push(pair_str_tmp[i].split('SPLIT_MID'))
  }
  console.log(pairs)
  ///////


</script>

{% block script_base %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="/web_experiments/static/js/jspsych-5.0.3/jspsych.js"></script>
<script src="/web_experiments/static/js/jspsych-5.0.3/plugins/jspsych-text.js"></script>
<script src="/web_experiments/static/js/jspsych-5.0.3/plugins/jspsych-single-stim.js"></script>
<script src="/web_experiments/static/js/jspsych-5.0.3/plugins/jspsych-survey-likert-gagne.js"></script>
<script src="/web_experiments/static/js/jspsych-5.0.3/plugins/jspsych-survey-text.js"></script>
<script src="/web_experiments/static/js/jspsych-5.0.3/plugins/jspsych-instructions-gagne.js"></script>
<script src="/web_experiments/experiment_beliefupdate/experiment_beliefupdate_session2.js"></script>
{% endblock %}

{% block style_base %}
<link href="/web_experiments/static/css/jspsych.css" rel="stylesheet">
<link href="/web_experiments/experiment_beliefupdate/experiment_beliefupdate.css" rel="stylesheet">
<link href="/web_experiments/experiment_beliefupdate/test.css" rel="stylesheet">
{% endblock %}



{% endblock %}
